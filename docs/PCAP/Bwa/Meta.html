<html><head><title>PCAP::Bwa::Meta</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.28,
  using Pod::Simple::PullParser v3.28,
  under Perl v5.016003 at Tue Feb  4 22:33:03 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Synopsis'>Synopsis</a>
    <li class='indexItem indexItem2'><a href='#Constructor'>Constructor</a>
    <li class='indexItem indexItem2'><a href='#Object_Methods'>Object Methods</a>
    <li class='indexItem indexItem2'><a href='#Utility_Methods'>Utility Methods</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#POD_ERRORS'>POD ERRORS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>PCAP::Bwa::Meta - Object to contain information about input files for mapping.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Synopsis"
>Synopsis</a></h2>

<p>Please use the following to generate these objects:</p>

<pre>  PCAP::Bwa::Meta::files_to_meta($tmp, \@files)</pre>

<p>This accepts bam, paired fastq and interleaved fastq. Fastq files can be gzip compressed. The calling program should decide which type of files it is able to process.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Constructor"
>Constructor</a></h2>

<dl>
<dt><a name="new"
>new</a></dt>

<dd>
<p>Generates the object when called with hashref of options, please use <a href="../../PCAP/Bwa/Meta.html#files_to_meta" class="podlinkpod"
>files_to_meta</a> to generate the objects.</p>

<dt><a name="files_to_meta"
>files_to_meta</a></dt>

<dd>
<p>Generates a set of PCAP::Bwa::Meta objects based on the input files.</p>

<pre>  my $meta_set = PCAP::Bwa::Meta::files_to_meta($tmpdir, \@files);</pre>

<p>Returns a array reference of checked and pre-processed information.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Object_Methods"
>Object Methods</a></h2>

<dl>
<dt><a name="in"
>in</a></dt>

<dd>
<p>Can store BAM, FASTQ or INTERLEAVED FASTQ</p>

<p>Retrieve the original file path. In the case of a paired FASTQ file this will be truncated back to the common part of the filename so that both elements are represented by one object.</p>

<pre>  FASTQ 1: /somepath/xxx_1.fq.gz
  FASTQ 2: /somepath/xxx_2.fq.gz

  in = /somepath/xxx</pre>

<dt><a name="tstub"
>tstub</a></dt>

<dd>
<p>A path for files generated from the input file represented here. The path is constructed from &#39;temp&#39; and the rg_id.</p>

<dt><a name="fastq"
>fastq</a></dt>

<dd>
<p>Extension type of fastq file, see <a href="../../PCAP/Bwa/Meta.html#parse_fastq_filename" class="podlinkpod"
>parser_fastq_filename</a>.</p>

<dt><a name="paired_fq"
>paired_fq</a></dt>

<dd>
<p>Flag to indicate that content of <a href="../../PCAP/Bwa/Meta.html#in" class="podlinkpod"
>in()</a> is a stub for paired fastq rather than an interleaved fastq, see <a href="../../PCAP/Bwa/Meta.html#parse_fastq_filename" class="podlinkpod"
>parser_fastq_filename</a>.</p>

<p>Added for future compatibility with files that can be used with &#39;BWA mem&#39;.</p>

<dt><a name="fastq"
>fastq</a></dt>

<dd>
<p>When input is some form of fastq this returns the extension, otherwise undef.</p>

<dt><a name="paired_fq"
>paired_fq</a></dt>

<dd>
<p>When input is a paired fastq file this returns true.</p>

<dt><a name="rg"
>rg</a></dt>

<dd>
<p>Returns the RG_ID that has been applied to this input.</p>

<dt><a name="rg_header"
>rg_header</a></dt>

<dd>
<p>Call this with a hash of RG header tags to generate and retrieve the header, e.g.</p>

<pre>  $meta-&#62;rg_header(q{\t}, -SN =&#62; &#39;some_sample_name&#39;, -LB =&#62; &#39;library_name&#39;);</pre>

<p>After generation you can retrieve with the required separator (&#39;\t&#39; for passing string to bwa on command line, &#34;\t&#34; for direct use):</p>

<pre>  print $meta-&#62;rg_header(qq{\t}).&#34;\n&#34;;

  $to_pass_to_command = $meta-&#62;rg_header(q{\t});</pre>

<p>SN is the only required element at present. See the Samtools <a href="http://samtools.sourceforge.net/SAMv1.pdf" class="podlinkurl"
>specification</a> for details.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Utility_Methods"
>Utility Methods</a></h2>

<dl>
<dt><a name="set_rg_index"
>set_rg_index</a></dt>

<dd>
<pre>  PCAP::Bwa::Meta::set_rg_index($int);</pre>

<p>Initialise the RG ID value to start at this INTEGER.</p>

<dt><a name="reset_rg_index"
>reset_rg_index</a></dt>

<dd>
<pre>  PCAP::Bwa::Meta::next_rg_index();
    # or
  &#38;PCAP::Bwa::Meta::next_rg_index;</pre>

<p>Reset the RG ID value to 1.</p>

<dt><a name="is_fastq_ext"
>is_fastq_ext</a></dt>

<dd>
<p>Determines if the file is some form of fastq file. If not fastq original filename is returned. When fastq the file extension is removed from the end of the filename and returned as the second argument.</p>

<pre>  my ($new_name, $ext) = PCAP::Bwa::Meta::is_fastq_ext(&#39;1_1.fq&#39;);
    # $new_name = 1_1
    # $ext = &#39;fq&#39;

  my ($new_name, $ext) = PCAP::Bwa::Meta::is_fastq_ext(&#39;1_1.bam&#39;);
    # $new_name = 1_1.bam
    # $ext = undef</pre>

<p>Understands the following as fastq files:</p>

<pre>  fastq
  fastq.gz
  fq
  fq.gz</pre>

<dt><a name="parse_fastq_filename"
>parse_fastq_filename</a></dt>

<dd>
<p>Takes a fastq filename after removal of the extension (see <a href="../../is_fastq_ext().html#PCAP%3A%3ABwa%3A%3AMeta%2Fis_fastq_ext" class="podlinkpod"
>&#34;PCAP::Bwa::Meta/is_fastq_ext&#34; in is_fastq_ext()</a> and determines if file is read1, read2 or interleaved fastq.</p>

<p>Expects file to end &#39;_1&#39; or &#39;_2&#39; for paired, assumed interleaved otherwise.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="POD_ERRORS"
>POD ERRORS</a></h1>

<p>Hey! <b>The above document had some coding errors, which are explained below:</b></p>

<dl>
<dt><a name="Around_line_246:"
>Around line 246:</a></dt>

<dd>
<p>You forgot a &#39;=back&#39; before &#39;=head2&#39;</p>
</dd>
</dl>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
